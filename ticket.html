<!DOCTYPE html>
<html>
<head>
  <title>Raise Ticket</title>
  <!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>


</head>
<body>
  <h2>Raise New Ticket</h2>
  <input id="issue" placeholder="Issue Description"><br>
  <select id="priority">
    <option>Low</option>
    <option>Medium</option>
    <option>High</option>
  </select><br>
  <select id="category">
    <option>Technical</option>
    <option>Billing</option>
    <option>General</option>
  </select><br>
  <button onclick="submitTicket()">Submit</button>

  <script src="firebase-config.js"></script>
  <script>
    auth.onAuthStateChanged(user => {
      if (!user) window.location.href = "login.html";
    });

    function submitTicket() {
      const issue = document.getElementById("issue").value;
      const priority = document.getElementById("priority").value;
      const category = document.getElementById("category").value;

    db.collection("tickets").add({
    issue,
    priority,
    category,
    status: "Open",
    userId: auth.currentUser.uid,
    createdAt: new Date(),
    assignedTo: "",           // new field
    responseNotes: [],        // new field (array of strings)
    });
    alert("Submited");
 
    }
  </script>
</body>
</html>
